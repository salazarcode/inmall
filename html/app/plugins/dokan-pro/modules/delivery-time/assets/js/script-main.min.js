(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}function r(r){return function(t){if(Array.isArray(t))return e(t)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||t(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,d=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){d=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(d)throw i}}return o}}(e,r)||t(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i,o;i=jQuery,o={init:function(){i(".delivery-time-slot-picker").hide(),i(".delivery-time-date-picker").on("change",o.get_delivery_time_slots),o.init_calendar()},get_delivery_time_slots:function(e){e.preventDefault();var t=i(e.target),r=t.data("vendor_id"),n=t.data("nonce"),a=t.attr("value");a?i("#delivery-time-slot-picker-".concat(r)).fadeIn(400):i("#delivery-time-slot-picker-".concat(r)).fadeOut(400),i("#delivery-time-slot-picker-".concat(r)).val(i("#delivery-time-slot-picker-".concat(r," option:first")).val());var d={action:"dokan_get_delivery_time_slot",vendor_id:r,nonce:n,date:a};d.date&&o.get_delivery_time_slots_data(d)},get_delivery_time_slots_data:function(e){i("#dokan-spinner-overlay").fadeIn(100),jQuery.post(dokan.ajaxurl,e,(function(t){t.success&&(i("#dokan-spinner-overlay").fadeOut(400),i("#delivery-time-slot-picker-".concat(e.vendor_id," option:gt(0)")).remove(),i.each(t.data.vendor_delivery_slots,(function(t,r){i("#delivery-time-slot-picker-".concat(e.vendor_id)).append(i("<option></option>").attr("value",t).text(t))})))}))},init_calendar:function(){if("undefined"!=typeof dokan_delivery_time_vendor_infos)for(var e=dokan_delivery_time_vendor_infos,t={minDate:"today",altInput:!0,altFormat:dokan_get_i18n_date_format(!1),dateFormat:"Y-m-d",disable:[]},i=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],o=function(){var e=n(d[a],2),o=e[0],l=e[1],c=Object.keys(l.vendor_delivery_options.delivery_day),u=[];i.forEach((function(e){c.includes(e)||u.push(i.indexOf(e))}));var y=l.vendor_vacation_days,s=l.vendor_preorder_blocked_dates;t.disable=[function(e){return u.includes(e.getDay())}],t.disable=[].concat(r(t.disable),r(y),r(s)),flatpickr("#delivery-time-date-picker-"+o,t)},a=0,d=Object.entries(e);a<d.length;a++)o()}},jQuery(document).ready((function(e){o.init()}))})();